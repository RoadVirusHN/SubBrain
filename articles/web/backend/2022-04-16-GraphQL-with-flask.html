<!DOCTYPE html>
<html lang="kr"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>GraphQL with flask | The Digital garden of Nurgle.</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="GraphQL with flask" />
<meta property="og:locale" content="kr" />
<meta name="description" content="https://dev.to/mesadhan/python-flask-graphql-with-graphene-nla (Md. Sadhan Sarker)의 글을 번역, 정리한 글입니다." />
<meta property="og:description" content="https://dev.to/mesadhan/python-flask-graphql-with-graphene-nla (Md. Sadhan Sarker)의 글을 번역, 정리한 글입니다." />
<link rel="canonical" href="http://localhost:4000/articles/web/backend/2022-04-16-GraphQL-with-flask.html" />
<meta property="og:url" content="http://localhost:4000/articles/web/backend/2022-04-16-GraphQL-with-flask.html" />
<meta property="og:site_name" content="The Digital garden of Nurgle." />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-04-16T17:21:08+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="GraphQL with flask" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-04-16T17:21:08+09:00","datePublished":"2022-04-16T17:21:08+09:00","description":"https://dev.to/mesadhan/python-flask-graphql-with-graphene-nla (Md. Sadhan Sarker)의 글을 번역, 정리한 글입니다.","headline":"GraphQL with flask","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/articles/web/backend/2022-04-16-GraphQL-with-flask.html"},"url":"http://localhost:4000/articles/web/backend/2022-04-16-GraphQL-with-flask.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="The Digital garden of Nurgle." /></head>
<div class="scrollWrapper">
  <div class="scrollbar"></div>
  <div class="progressbar"></div>
  <div class="scrollbarButton"></div>
</div>

<link rel="stylesheet" href="/assets/css/obsidian/obs-scrollbar.css" />

<div class="redirection">
  <h1 class="name">Redirection for full experience.</h1>
  <br>
  Move to <br /> <a class="to" href="#">netlify url</a><br />
  <div>after <span class="counter">10</span>secs.</div>
  press <button class="cancle">here</button> to cancle.
</div>
<div class="overlay"></div>
<script type="module" src="/assets/scripts/common/components/init_redirection.js"></script>

<link rel="stylesheet" href="/assets/css/common/redirection.css" />

<body><header class="site-header" role="banner">

  <div class="wrapper" style="display: flex; justify-content: space-between;"><div id="header-wrapper">
    <a class="site-title" rel="author" href="/">The Digital garden of Nurgle.</a><script src="https://unpkg.com/lunr/lunr.js"></script>
<link rel="stylesheet" href="/assets/css/common/searchbar.css" />

<form id="search-form" method="get">
  <span id="search-wrapper">
    <span id="tag-holder" ></span>
    <input type="text" id="search-box" placeholder='Prefix "#" to add Tag.' autocomplete="off">
    <span class="inner-search" >🔍</span>
  </span>
</form></div><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <a class="page-link" href="/blog/">FRONTPAGE</a><a class="page-link" href="/about/">ABOUT ME</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
    <link rel="stylesheet" href="/assets/css/common/drawer.css" />
<button class="drawer-button open">▶️</button>
<div id="drawer" class="close">
  <button class="drawer-button close">
    ◀️
  </button>
  <div class="drawer-content">
    <div class="my-description">
      <div class="avatar-section" style="display: flex; flex-direction: row;">

        <img src="/assets/img/common/avatar.png" alt="avatar" class="avatar">
        <div style="display: flex; flex-direction: column; margin-left: 5px;">
          <a href="/about/">
            <h3 class="name">ROADVIRUSHN</h3>
          </a>
          <div class="stack-list" style="margin: 5px 0 0 5px;">
            <a title="My github page" href="https://github.com/RoadVirusHN">
  <svg class="svg-icon" width="16" height="16" viewBox="0 0 16 16">
    <use xlink:href="/assets/svg/social-icons.svg#github"></use>
  </svg>
</a>
<a title="My G-mail" href="mailto:roadvirushn@gmail.com">
  <svg class="svg-icon" width="16" height="16" viewBox="0 0 16 16">
    <use xlink:href="/assets/svg/social-icons.svg#gmail"></use>
  </svg>
</a>
<a title="My Blog" href="https://luminous-bubblegum-8e9be4.netlify.app">
  <svg class="svg-icon" width="16" height="16" viewBox="0 0 16 16">
    <use xlink:href="/assets/svg/social-icons.svg#blog"></use>
  </svg>
</a>
          </div>
        </div>
        <!-- <h4 class="name">(JUNSEOK YUN)</h4> -->
      </div>
      <p style="margin: 5px 0 0 0;">
        풀스택 웹🌐 개발자 지망생 🧑🏽‍💻
        <br>
        ➕ 인공지능 관심 🤖
      </p>
    </div>
    <div class="drawer-components">
      <hr>
      <div class="categories" style="flex: 2;">
        <h3 style="margin: 0;"><a href="/">Categories</a></h3>
        <ul class="category-list">
  
  
  
  <li>
    <strong style="font-size: larger;">┣ </strong>
    <h3 style="display: inline;">
      
      <span class="category-drop-down">▶</span>
      
      <a class="category-link" href="/categories/COMPUTER_SCIENCE/" >COMPUTER_SCIENCE</a>
    </h3>
    <span style="font-size: xx-small;">
      ( 
      📂: 5)
    </span>
    <ul class="child-category-list">
      
      <li>
        <strong style="font-size: larger;">
          ┃  
          ┣ 
        </strong>
        <h4 style="display: inline; background-color: lightgray; padding: 0px 1px; border-radius: 2px;">
          <a class="category-link" href="/categories/COMPUTER_SCIENCE/DATABASE/">DATABASE</a>
        </h4>
          <span style="font-size: xx-small;">
            (📄: 1 
            )
          </span>
      </li>
      
      <li>
        <strong style="font-size: larger;">
          ┃  
          ┣ 
        </strong>
        <h4 style="display: inline; background-color: lightgray; padding: 0px 1px; border-radius: 2px;">
          <a class="category-link" href="/categories/COMPUTER_SCIENCE/ALGORITHM/">ALGORITHM</a>
        </h4>
          <span style="font-size: xx-small;">
            (📄: 26 
            )
          </span>
      </li>
      
      <li>
        <strong style="font-size: larger;">
          ┃  
          ┣ 
        </strong>
        <h4 style="display: inline; background-color: lightgray; padding: 0px 1px; border-radius: 2px;">
          <a class="category-link" href="/categories/COMPUTER_SCIENCE/OPERATING_SYSTEM/">OPERATING_SYSTEM</a>
        </h4>
          <span style="font-size: xx-small;">
            (📄: 14 
            )
          </span>
      </li>
      
      <li>
        <strong style="font-size: larger;">
          ┃  
          ┣ 
        </strong>
        <h4 style="display: inline; background-color: lightgray; padding: 0px 1px; border-radius: 2px;">
          <a class="category-link" href="/categories/COMPUTER_SCIENCE/NETWORK/">NETWORK</a>
        </h4>
          <span style="font-size: xx-small;">
            (📄: 8 
            )
          </span>
      </li>
      
      <li>
        <strong style="font-size: larger;">
          ┃  
          ┗ 
        </strong>
        <h4 style="display: inline; background-color: lightgray; padding: 0px 1px; border-radius: 2px;">
          <a class="category-link" href="/categories/COMPUTER_SCIENCE/ETC/">ETC</a>
        </h4>
          <span style="font-size: xx-small;">
            (📄: 1 
            )
          </span>
      </li>
      
    </ul>
  </li>
  
  
  <li>
    <strong style="font-size: larger;">┣ </strong>
    <h3 style="display: inline;">
      
      <span class="category-drop-down">▶</span>
      
      <a class="category-link" href="/categories/WEB/" >WEB</a>
    </h3>
    <span style="font-size: xx-small;">
      ( 
      📂: 3)
    </span>
    <ul class="child-category-list">
      
      <li>
        <strong style="font-size: larger;">
          ┃  
          ┣ 
        </strong>
        <h4 style="display: inline; background-color: lightgray; padding: 0px 1px; border-radius: 2px;">
          <a class="category-link" href="/categories/WEB/FRONTEND/">FRONTEND</a>
        </h4>
          <span style="font-size: xx-small;">
            (📄: 2 
            )
          </span>
      </li>
      
      <li>
        <strong style="font-size: larger;">
          ┃  
          ┣ 
        </strong>
        <h4 style="display: inline; background-color: lightgray; padding: 0px 1px; border-radius: 2px;">
          <a class="category-link" href="/categories/WEB/BACKEND/">BACKEND</a>
        </h4>
          <span style="font-size: xx-small;">
            (📄: 7 
            )
          </span>
      </li>
      
      <li>
        <strong style="font-size: larger;">
          ┃  
          ┗ 
        </strong>
        <h4 style="display: inline; background-color: lightgray; padding: 0px 1px; border-radius: 2px;">
          <a class="category-link" href="/categories/WEB/CI,CD/">CI,CD</a>
        </h4>
          <span style="font-size: xx-small;">
            (📄: 5 
            📂: 1)
          </span>
      </li>
      
    </ul>
  </li>
  
  
  <li>
    <strong style="font-size: larger;">┗ </strong>
    <h3 style="display: inline;">
      
      <a class="category-link" href="/categories/ETC/" >ETC</a>
    </h3>
    <span style="font-size: xx-small;">
      (📄: 8 
      )
    </span>
    <ul class="child-category-list">
      
    </ul>
  </li>
  
</ul>
      </div>
      <hr>
      <div class="recent-view" style="flex: 1;">
        <h3 style="margin: 0;">Recent views</h3>
        <ul style="margin-left: 16px;">
          <li>
            <strong style="color:rgb(219, 219, 12);">1 <a id="recent-1"></a></strong>
          </li>
          <li>
            2 <a id="recent-2" style="overflow: hidden;"></a>
          </li>
          <li>
            3 <a id="recent-3" style="overflow: hidden;"></a>
          </li>
          <li>
            4 <a id="recent-4" style="overflow: hidden;"></a>
          </li>
          <li>
            5 <a id="recent-5" style="overflow: hidden;"></a>
          </li>
        </ul>
      </div>
    </div>
    <hr>
  </div>
  <div style="bottom: 10px; height: 7vh; flex: 1;"></div>
</div>
    <div class="wrapper">
      <article class="article h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="article-header">
    <h1 class="article-title a-name" itemprop="name headline">GraphQL with flask</h1>
    <p class="article-meta">
      <time class="dt-published" datetime="2022-04-16T17:21:08+09:00" itemprop="datePublished">Apr 16, 2022
      </time></p>
  </header>

  <div class="article-content e-content" itemprop="articleBody">
     


<script src="/assets/scripts/bundle/obsidian.bundle.js"></script>
<link rel="stylesheet" href="/assets/css/obsidian/callout.css" />
<link rel="stylesheet" href="/assets/css/obsidian/image.css" />
<link rel="stylesheet" href="/assets/css/obsidian/link-warning.css" />
<link rel="stylesheet" href="/assets/css/obsidian/preview.css" />

<div class="content-section">
  <p>https://dev.to/mesadhan/python-flask-graphql-with-graphene-nla (Md. Sadhan Sarker)의 글을 번역, 정리한 글입니다.</p>

<ol id='markdown-toc-0'>
<li><a href='#GraphQL과-REST의-차이-예시' id='markdown-toc-0-GraphQL과-REST의-차이-예시'>GraphQL과 REST의 차이 예시</a></li> 
<li><a href='#Python-Graphene을-이용한-GraphQL-서버-구현' id='markdown-toc-0-Python-Graphene을-이용한-GraphQL-서버-구현'>Python Graphene을 이용한 GraphQL 서버 구현</a></li> 
</ol>
<h1 id="graphql-with-flask">GraphQL with flask</h1>

<p>GraphQL은 API를 위한 query language이다. REST API에 비해 여러 장점이 있으며 특히 data fetching 부분이 효율적이다. 규모가 큰 API일수록 더욱 효과적이고 강력하며, facebook에서 open source로 배포하여 커다란 커뮤니티를 이루었다.</p>

<p>요즘은 선언형 프로그래밍이 점점 인기를 얻고 있는데, GraphQL 또한, 여러 API 호출을 불러와야하는 REST API와는 달리 선언형 데이터 fetching이용한다. GraphQL 서버는 오직 하나의 endpoint(root URL 뒤에 붙는 추가 주소)와 클라이언트가 요청한 여러 response로 이루어졌다. 앞으로 예시를 살펴볼 것이다.</p>

<p><strong>GraphQL vs REST</strong></p>

<ul>
  <li>GraphQL은 쿼리로 우리가 필요한 데이터만  명시하게 해주며, 한번의 요청으로 정확히 그 데이터만 응답에 포함시켜줄 것이다.  이에 반해 REST API는 여러 응답과 호출을 요구한다.</li>
</ul>

<h2 id='GraphQL과-REST의-차이-예시'>GraphQL과 REST의 차이 예시</h2>

<ul>
  <li>
    <p>API에서 data를 가져올 때, 큰 차이를 보여주는데. 블로그에서 어떤 유저의 작성글들의 제목이 필요할 경우, 또한 같은 페이지에서 그 유저의 최신 팔로워들 3명의 이름을 가져오려 할 때, GraphQL과 REST API는 어떤 차이를 보일까?</p>

    <blockquote>
      <p><strong>REST API의 경우</strong></p>
    </blockquote>

    <ul>
      <li>
        <p>REST API에서는 여러 endpoint에서 데이터를 가져온다.</p>

        <ul>
          <li>예를 들어, /user/&lt;id&gt; endpoint에서 먼저 유저 데이터를 가져오낟</li>
          <li>그 후, /user/&lt;id&gt;/posts endpoint에서 해당 유저의 모든 게시글들을 가져온다</li>
          <li>마지막으로, /user/&lt;id&gt;/followers에서 해당 유저의 모든 팔로워들을 가져온다</li>
        </ul>
      </li>
      <li>
        <p><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--dTu5x1Mo--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://imgur.com/VRyV7Jh.png" alt="" /></p>

        <p>​	- 그림 출처 : source :howtographql.com</p>

        <ul>
          <li>REST API를 사용하면 3번의 각자 다른 주소로 3번의 요청을 보내야 하며, 쓸데없는 추가 데이터들을 추가로 가져온다는 것을 알 수 있다.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>아니면 /users/posts/follwers/&lt;id&gt; 라는 새로운 endpoint를 만들고, 우리가 원하는 데이터만 가져오게 만들어도 된다. 하지만 그렇게하면 끔직한 생산성과 재사용성을 가져올 것이다. 추가로 날짜에 따라 정보를 가져오려면 /users/posts/follwers/&lt;id&gt;/&lt;date&gt;라는 endpoint를 만들어야한다.</p>
  </li>
</ul>

<blockquote>
  <p><strong>GraphQL의 경우</strong></p>
</blockquote>

<ul>
  <li>GraphQL은 단 하나의 query를 서버에 보낸다. 서버는 JSON 형식의 respond를 돌려준다.</li>
</ul>

<p><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Icv1_RJj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://imgur.com/z9VKnHs.png" alt="" /></p>

<ul>
  <li>그림 출처 : source :howtographql.com</li>
  <li>GraphQL에서는 클라이언트 서버가 필요한 데이터만 쿼리에 포함할 수 있다. 백엔드 서버의 응답 또한 정확히 쿼리에 정의한 구조를 따른다</li>
</ul>

<p>멋지지 않는가? 이론은 충분하니 이제 Python Graphne을 이용해서 GraphQL 서버를 만들어보자.</p>

<h2 id='Python-Graphene을-이용한-GraphQL-서버-구현'>Python Graphene을 이용한 GraphQL 서버 구현</h2>
<ul>
  <li>Graphene은 python으니 GraphQL 클라이언트 라이브러리이다. 이를 이용해 우리만의 GraphQL 서버를 만들 수 있다.<br />
<strong>Setting up your poject</strong></li>
  <li>먼저 프로젝트 경로와 폴더를 생성한다.<br />
```bash<br />
$ mkdir graphql-flask<br />
$ cd graphql-flask</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- 가상환경설정을 통해 global package들과의 충돌을 피하고, 각 프로젝트 별로 패키지 버전 관리를 쉽게 할 수 있다.
```bash
$ pip install virtualenv
$ virtualenv venv
$ source venv/bin/activate

참고로 
$ deactivate
로 가상 환경에서 나갈 수 있다.

</code></pre></div></div>
<ul>
  <li>필요한 depndency를 맞추기 위해 아래와 같이 터미널에 입력하라</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pip <span class="nb">install </span>flask flask-graphql flask-migrate flask-sqlalchemy graphene graphene-sqlalchemy

</code></pre></div></div>
<ul>
  <li>이후 우리의 데이터베이스를 실행해야 한다. 아래 seed.py를 만들어 보자.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">db</span><span class="p">,</span> <span class="n">User</span><span class="p">,</span> <span class="n">Post</span>

<span class="n">db</span><span class="p">.</span><span class="n">create_all</span><span class="p">()</span>     <span class="c1"># create tables from models
</span>
<span class="n">user1</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=&amp;</span><span class="c1">#34;Sadhan Sarker&amp;#34;,
</span>    <span class="n">email</span><span class="o">=&amp;</span><span class="c1">#39;cse.sadhan@gmail.com&amp;#39;
</span><span class="p">)</span>

<span class="n">post1</span> <span class="o">=</span> <span class="n">Post</span><span class="p">()</span>
<span class="n">post1</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="o">&amp;</span><span class="c1">#34;Blog Post Title 1&amp;#34;
</span><span class="n">post1</span><span class="p">.</span><span class="n">body</span> <span class="o">=</span> <span class="o">&amp;</span><span class="c1">#34;This is the first blog post 1&amp;#34;
</span><span class="n">post1</span><span class="p">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">user1</span>

<span class="n">db</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">post1</span><span class="p">)</span>
<span class="n">db</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">user1</span><span class="p">)</span>
<span class="n">db</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">User</span><span class="p">.</span><span class="n">query</span><span class="p">.</span><span class="nb">all</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">Post</span><span class="p">.</span><span class="n">query</span><span class="p">.</span><span class="nb">all</span><span class="p">())</span>

</code></pre></div></div>
<ul>
  <li>위 스크립트를 실행하려면 아래와 같이 입력하라<br />
```bash<br />
python seed.py</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- 좋다! 거의 다됬다! 마지막으로 app.py 스크립트를 만들고 프로젝트에 추가하자
```python
import os

import graphene
from flask import Flask
from flask_graphql import GraphQLView
from flask_sqlalchemy import SQLAlchemy
from graphene_sqlalchemy import SQLAlchemyObjectType, SQLAlchemyConnectionField

app = Flask(__name__)

basedir = os.path.abspath(os.path.dirname(__file__))

# Database Configs [Check it base on other Database Configuration]
app.config[&amp;#39;SQLALCHEMY_DATABASE_URI&amp;#39;] = &amp;#39;sqlite:///&amp;#39; + os.path.join(basedir, &amp;#39;database.sqlite&amp;#39;)
app.config[&amp;#39;SQLALCHEMY_COMMIT_ON_TEARDOWN&amp;#39;] = True
app.config[&amp;#39;SQLALCHEMY_TRACK_MODIFICATIONS&amp;#39;] = True

# Initialize Database
db = SQLAlchemy(app)


# ------------------  Database Models ------------------

class User(db.Model):
    __tablename__ = &amp;#39;users&amp;#39;
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(256))
    email = db.Column(db.String(256), index=True, unique=True)  # index =&amp;#38;#62; should not be duplicate
    posts = db.relationship(&amp;#39;Post&amp;#39;, backref=&amp;#39;author&amp;#39;)

    def __repr__(self):
        return &amp;#39;&amp;#38;#60;User &amp;#37;r&amp;#38;#62;&amp;#39; &amp;#37; self.email


class Post(db.Model):
    __tablename__ = &amp;#39;posts&amp;#39;
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(256))
    body = db.Column(db.Text)
    author_id = db.Column(db.Integer, db.ForeignKey(&amp;#39;users.id&amp;#39;))

    def __repr__(self):
        return &amp;#39;&amp;#38;#60;Post &amp;#37;r&amp;#38;#62;&amp;#39; &amp;#37; self.title


# ------------------ Graphql Schemas ------------------


# Objects Schema
class PostObject(SQLAlchemyObjectType):
    class Meta:
        model = Post
        interfaces = (graphene.relay.Node,)


class UserObject(SQLAlchemyObjectType):
    class Meta:
        model = User
        interfaces = (graphene.relay.Node,)


class Query(graphene.ObjectType):
    node = graphene.relay.Node.Field()
    all_posts = SQLAlchemyConnectionField(PostObject)
    all_users = SQLAlchemyConnectionField(UserObject)


# noinspection PyTypeChecker
schema_query = graphene.Schema(query=Query)


# Mutation Objects Schema
class CreatePost(graphene.Mutation):
    class Arguments:
        title = graphene.String(required=True)
        body = graphene.String(required=True)
        email = graphene.String(required=True)

    post = graphene.Field(lambda: PostObject)

    def mutate(self, info, title, body, email):
        user = User.query.filter_by(email=email).first()
        post = Post(title=title, body=body)
        if user is not None:
            post.author = user
        db.session.add(post)
        db.session.commit()
        return CreatePost(post=post)


class Mutation(graphene.ObjectType):
    save_post = CreatePost.Field()


# noinspection PyTypeChecker
schema_mutation = graphene.Schema(query=Query, mutation=Mutation)


# Flask Rest &amp;#38; Graphql Routes
@app.route(&amp;#39;/&amp;#39;)
def hello_world():
    return &amp;#39;Hello From Graphql Tutorial!&amp;#39;


# /graphql-query
app.add_url_rule(&amp;#39;/graphql-query&amp;#39;, view_func=GraphQLView.as_view(
    &amp;#39;graphql-query&amp;#39;,
    schema=schema_query, graphiql=True
))

# /graphql-mutation
app.add_url_rule(&amp;#39;/graphql-mutation&amp;#39;, view_func=GraphQLView.as_view(
    &amp;#39;graphql-mutation&amp;#39;,
    schema=schema_mutation, graphiql=True
))

if __name__ == &amp;#39;__main__&amp;#39;:
    app.run()

</code></pre></div></div>
<ul>
  <li>이제 우리는 graphene으로 graphql을 만들었다. 실행해보자.<br />
```bash<br />
$ python app.py</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## GraphQL API 테스트
- PostMan이나 cRUL을 이용해 서버와 통신해보자.
- GraphQL은 원칙적으로 POST와 GET 요청만 받는다.
```postman
## 1. Rest API examples
GET http://127.0.0.1:5000/

### Graphql query-api example
POST http://127.0.0.1:5000/graphql-query
Content-Type: application/graphql

&amp;#123;
  allPosts&amp;#123;
    edges&amp;#123;
      node&amp;#123;
        title
        author&amp;#123;
          email
        &amp;#125;
      &amp;#125;
    &amp;#125;
  &amp;#125;
&amp;#125;

### 2. Graphql mutation-api example

POST http://127.0.0.1:5000/graphql-mutation
Content-Type: application/graphql

mutation &amp;#123;
  savePost(email:&amp;#34;cse.sadhan@gmail.com&amp;#34;, title:&amp;#34;Title 2&amp;#34;, body:&amp;#34;Blog post 2&amp;#34;) &amp;#123;
    post&amp;#123;
      title
      body
      author&amp;#123;
        email
      &amp;#125;
    &amp;#125;
  &amp;#125;
&amp;#125;

###

</code></pre></div></div>

</div>

  </div><a class="u-url" href="/articles/web/backend/2022-04-16-GraphQL-with-flask.html" hidden></a>
  <p class="u-path" hidden>_articles/web/backend/2022-04-16-GraphQL-with-flask.md</p>
  <script type="module" src="/assets/scripts/utils/update_recents.js"></script>
</article>

    </div>
  </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">The Digital garden of Nurgle.</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="a-name">The Digital garden of Nurgle.</li><li><a class="u-email" href="mailto:roadvirushn@gmail.com">roadvirushn@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li>
    <a href="https://github.com/RoadVirusHN"><svg class="svg-icon">
        <use xlink:href="/assets/svg/social-icons.svg#github"></use>
      </svg>
      <span class="username">RoadVirusHN</span></a>
  </li><!---->
</ul></div>

      <div class="footer-col footer-col-3">
        <p>이것이 디지털 동물의 숲이다!! 파멸편 (This is the Digital Animal Crossing!! Bad Ending.01)</p>
      </div>
    </div>

  </div>

</footer>
</body>

<script src="/assets/scripts/bundle/common.bundle.js"></script>

</html>