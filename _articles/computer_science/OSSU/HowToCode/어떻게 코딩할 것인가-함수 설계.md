---
title: 어떻게 코딩할 것인가-함수 설계
date: 2023-01-04 10:15:35 +0900
tags: HIDE CRUDE 
layout: obsidian
is_Finished: false
last_Reviewed: 2023-01-04 10:15:35 +0900
use_Mathjax: true
---

```toc
style: number
min_depth: 2
max_depth: 3
varied_style: true
```

# 함수 설계

함수 설계 과정을 숙달하고 이해하면 어렵고 고차원의 함수를 구현할 때 큰 도움이 된다.

함수 설계는 폭포수 모델로 구현되지 않았으며 **애매모호하거나 틀릴 경우 이전 단계로 돌아가서 수정**해도 된다.
- 물론 그렇다고 **과정을 대충 생략하면 안된다.** 각 단계는 다음 단계를 설계하는데 도움이 되게끔 설계되었다.

**가끔 단계의 순번을 바꾸는 방식이 유용**할 때도 있지만 4번의 구현 단계는 절대로 처음으로 오면 안된다.
- 4번 함수 구현 자체가 이 설계의 목적이기 때문

**자주, 그리고 빨리 함수를 실행시켜 조기에 잘못을 찾아 고치는게 좋다.** 여러 잘못이 쌓인다면 무엇이 잘못인지 모르게 되기 때문이다.

```ad-seealso
title: 사소한 가독성 팁
collapse: close

강의에서 강사님이 나는 별로 세세하게 따지지 않았었던 인덴트와 순서가 상관없는 데이터의 순서 통일 등을 통해 가독성을 올릴 수 있었다.

~~~python
# data 순서가 다음과 같다면
data = [3, 1, 2]

# 테스트 순서도 굳이 다음과 같이 맞춰주기
print(fn(3)==3) 
print(fn(1)==1)
print(fn(2)==2)
~~~
```

## 함수 설계 과정

```ad-example
title: 함수 디자인 예시
collapse: true

~~~python
# 문자열의 길이가 5보다 작은지 알아보는 함수를 만들자!

# 1. signature, purpose, stub 설계

# signature: (string => boolean)
# purpose: 문자열을 입력받아 해당 문자열의 길이를 비교해 5보다 작은지(X) => 5 미만인지(O) 여부를 참, 거짓으로 알려주는 함수

# stub : 테스트를 위한 임시 함수
def isLessThan5_stub(string):
	return True
	
# 2. 테스트 설계
print(isLessThan5_stub("") == True) # 경계값 확인
print(isLessThan5_stub("stub") == True) # True 반환 커버리지
print(isLessThan5_stub("apple") == False) # 경계 조건
print(isLessThan5_stub("computer") == False) # False 반환 커버리지


# 3. 함수 템플릿 설계
# def isLessThan5(string):
# ...string # ...= 무언가를 할거다는 의미

# 4. 함수 설계
def isLessThan5(string):
	return len(string) < 5

# 5. 테스트 결과 확인
print(isLessThan5("") == True) # 통과
print(isLessThan5("stub") == True) # 통과
print(isLessThan5("apple") == False) # 통과
print(isLessThan5("computer") == False) # 통과

# 만약 틀렸을 경우, 위 1~4 과정 중 애매모호하거나 잘못된 부분 확인하기
~~~
```

### 1. 시그니처, 목적, 스텁, 생성
- **시그니처** : 인풋과 아웃풋에 대한 정보, 특히 데이터 타입,
		- 자세해야 한다. ex) Number (X) Float (O)
		- ex) 두 수 더하기 함수의 시그니처 (Integer Integer -> Integer)

- **목적**은 해당 함수의 사용하는 목적과 입력값과 결과값의 의미 
	- 단순 입력과 출력이 아니라 각각 데이터의 의미가 들어가면 좋다. 애매모호한 기준과 단어를 쓰면 안됨. 
```ad-example
title: 목적의 예시

ex) 두 수가 주어지고 두 수를 더한 값이 출력 (X)

ex) 두 사람의 사과 갯수가 들어가 두 사람이 가진 사과들의 총합을 출력 (O) => 데이터의 의미

ex) 해당 수가 큰 값인지 여부를 출력 (X)

ex) 해당 수가 100보다 큰 수인지 여부를 출력 (O) => 기준이 확실
```

- **스텁** : 앞으로 작성할 테스트들을 오류없이 돌려보기 위해 임시로 적당한 결과를 내놓는 함수
	- 입력값과 출력값의 데이터 타입만 맞추고 실제 값은 아무값이나 주어지면 된다.
	- 시그니처와 맞는 타입, 네이밍 컨벤션 지키기, 좋은 함수명 중요
	- ex) `def add(a, b): return 0`

### 2. 테스트 커버리지와 입력 값들을 고려한 테스트 실행 코드 작성 
- 테스트의 수는 테스트 커버리지와 각기 다른 입력값들의 구간 대표값과 경계값을 모두 고려할 수 있을 만큼 해야한다.
	- **코드 커버리지: 테스트가 함수 내부의 코드의 일부를 확인하는 정도**
		- 주로 분기문처럼 조건에 따라 동작하지 않을 수 있는 코드가 있는 경우, 테스트의 수를 고려해야 한다.
		- ex)  `(a > 3) if (a > 0) else (a < -2)`의 경우, `-3, -1 , 1, 4`의 a값을 넣을 경우 모든 부분을 커버한다.
		- 이때 **`a`가 가질 수 있는 각 구간의 값들 `-3, -1, 1, 4`를 구간 대표값**이라고 한다.
	- **경계 값 또는 경계 조건 (boundary condition): 각 구간 사이 기준에 해당하거나 특수한 값(0, -1, 1) 등 성질이 바뀌는 값들을 의미**
		- 주어진 두 사각형 중, 넓은 사각형을 돌려주는 함수, 그렇다면 두 넓이가 같다면?
		- 실수로 고려하지 못하는 경우가 많으며 새로 발견되면, 1번 과정도 수정해야 되는 경우가 많음
```ad-example
title: 테스트 커버리지 고려 예시

**첫번째 이미지가 두번째 이미지보다 길이와 너비 둘다 큰가? 함수의 경우**

(너비 : 더 작은 경우, 같은 경우, 큰 경우) $\times$ (높이 : 더 작은 경우, 같은 경우, 큰 경우)가 필요하므로 경계값과 대표값을 포함해 최소 9개의 테스트가 있어야 한다.
```
- 테스트를 통해 함수의 목적, 필요한 상수와 데이터, 함수에 필요한 인자 등을 미리 깨달을 수 있게 하며, 이를 통해 함수 설계를 쉽게 한다.


### 3. 템플릿 만들기
- 네이밍 컨벤션과 주어진 파라미터 지키기, 보통 `...`(파라미터들의 나열로 표현)
- 함수들을 구현할 때 템플릿을 복사하여 구현한다.
- 템플릿을 완성하면 1번의  stub은 주석 처리해야 한다.
	- ex) `def add(a, b): ...a ...b`
- 함수의 템플릿은 데이터 설계의 정보를 기반으로 만들면 쉽다.

```ad-example
title: 데이터 설계와 함수 템플릿의 상관 관계
![[image-20230110112528684.png|500]]
- 보다시피 데이터 정의 과정의 참조과정을 통해 함수의 구조, 도움 함수(helper function) 등의 필요성과 위치 등을 짐작할 수 있으며, 이를 통해 함수를 쉽게 구현할 수 있다.
```


### 4. 함수 구현하기
- 군더더기 없이 오류없이 잘 구현하였는가?
	- 군더더기는 주로 사용하지 않는 변수, 쓸모 없는 코드, 쓸모 없는 주석을 의미
- **도움 함수(helper function)** : 함수 내부의 복잡한 로직을 추가로 구현하는 함수, 보통 데이터 정의 과정에서 들어난다.
	- 위의 _데이터 설계와 함수 템플릿의 상관 관계_ 그림의 `fn-for-school` 함수 같은 함수를 의미
	- 도움 함수 구현 시 현재 함수 설계 과정을 재귀적으로 진행하면 된다.

### 5. 테스트와 디버깅하기
- 고려할 사항들
	- 모든 테스트가 예상 결과값을 통과했는가?
	- 함수 내 모든 코드들을 테스트하는가?
	- 목적에 맞는 결과를 내놓는가?
- 만약, 오류가 생기면, 테스트가 잘못됬는지, 함수 구현이 잘못됬는지 꼭 확인하자!
- 빠르게, 자주 테스트하여 잘못을 조기에 발견하자!

이후 함수를 완성하면 함수를 제외하곤 전부 지워도 된다.